// Main.
import Home from "./pages/home/home";
// List.
import Users from "./pages/users/users";
import Product from "./pages/product/product";
import OrderList from "./pages/orders/order";
import Delivery from "./pages/delivery/delivery";
// Useful.
import StatList from "./pages/stat/stat";
// Authentication pages.
import Login from "./pages/login/login";
import Register from "./pages/register/register";

import {
  BrowserRouter as Router,
  Route,
  Switch,
} from "react-router-dom/cjs/react-router-dom.min";


function App() {

  return (
    <Router>
      <div className="App">
        <Switch>
          <Route exact path="/">
            <Login/>
          </Route>
          <Route path="/register">
            <Register/>
          </Route>
          <Route path="/home">
            <Home/>
          </Route>
          <Route path="/users">
            <Users/>
          </Route>
          <Route path="/products">
            <Product/>
          </Route>
          <Route path="/orders">
            <OrderList/>
          </Route>
          <Route path="/delivery">
            <Delivery/>
          </Route>
          <Route path="/stat">
            <StatList/>
          </Route>

        </Switch>
      </div>
    </Router>
  );
}

export default App;








import React, { useEffect, useState } from 'react';
import { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';
import AuthService from './AuthService';
import ProtectedRoute from './ProtectedRoute';

// Import your components
import Home from './pages/home/home';
import Users from './pages/users/users';
import Product from './pages/product/product';
import OrderList from './pages/orders/order';
import Delivery from './pages/delivery/delivery';
import StatList from './pages/stat/stat';
import Login from './pages/login/login';
import Register from './pages/register/register';

function App() {
  const [isAuthenticated, setIsAuthenticated] = useState(false);

  useEffect(() => {
    // Check if token exists in local storage
    const token = localStorage.getItem('token');
    if (token) {
      setIsAuthenticated(true);
    } else {
      setIsAuthenticated(false);
    }
  }, []);

  const handleLogout = () => {
    AuthService.removeToken();
    setIsAuthenticated(false);
  };

  return (
    <Router>
      <div className="App">
        <Switch>
          <Route exact path="/login" render={() => (
            isAuthenticated ? <Redirect to="/home" /> : <Login />
          )} />
          <Route exact path="/register" render={() => (
            isAuthenticated ? <Redirect to="/home" /> : <Register />
          )} />

          <ProtectedRoute path="/home" component={Home} isAuthenticated={isAuthenticated} />
          <ProtectedRoute path="/users" component={Users} isAuthenticated={isAuthenticated} />
          <ProtectedRoute path="/products" component={Product} isAuthenticated={isAuthenticated} />
          <ProtectedRoute path="/orders" component={OrderList} isAuthenticated={isAuthenticated} />
          <ProtectedRoute path="/delivery" component={Delivery} isAuthenticated={isAuthenticated} />
          <ProtectedRoute path="/stat" component={StatList} isAuthenticated={isAuthenticated} />
          <Redirect from="/" to={isAuthenticated ? "/home" : "/login"} />
        </Switch>
      </div>
    </Router>
  );
}

export default App;
